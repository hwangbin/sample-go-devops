name: Go CI and Push to Docker Hub

on:
  push:
    branches: [ "main" ]

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      - name: 코드 가져오기
        uses: actions/checkout@v4

      - name: 도커 허브 로그인
        uses: docker/login-action@v3
        with:
        username: ${{ secrets.DOCKER_USERNAME }} # "금고에서 DOCKER_USERNAME을 꺼내와라"라는 뜻
        password: ${{ secrets.DOCKER_PASSWORD }} #

      - name: 도커 이미지 빌드 및 업로드
        uses: docker/build-push-action@v5
        with:
          context: .
          push: true
          # 아래 'hwangbin' 자리에 본인의 도커 허브 ID를 넣어주세요!
          tags: hwangseungbin/sample-go:latest